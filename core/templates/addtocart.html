{% load static %}
<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <title></title>
  <link rel="stylesheet" href="{% static 'style2.css' %}">
    
</head>

<body>
  <section class="h-100 h-custom ">
    <div class="container h-100 py-5 ">
      <div class="row d-flex justify-content-center align-items-center h-100">
        <div class="col">

          <div class="table-responsive">
            <table class="table">
              <thead>
                <tr>
                  <th scope="col" class="h5">Shopping Bag</th>
                  <th scope="col">Size</th>
                  <th scope="col" name="quantity">Quantity</th>
                  <th scope="col">Price</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <th scope="row">
                    <div class="d-flex align-items-center">
                      <img src="{{product.image}}" class="img-fluid rounded-3" style="width: 120px;" alt="Book">
                      <div class="flex-column ms-4">
                        <p class="mb-2">{{product.name}}</p>
                        <p class="mb-0">{{product.brand}}</p>
                      </div>
                    </div>
                  </th>
                  <td class="align-middle">
                    <p class="mb-0" style="font-weight: 500;">M</p>
                  </td>
                  <td class="align-middle">
                    {{qty}}
                  </td>
                  <td class="align-middle">
                    <p class="mb-0" style="font-weight: 500;" id="price">{{product.price}}</p>
                  </td>
                </tr>

              </tbody>
            </table>
          </div>
        </div>
          
      </div>

    </div>
    </div>
    </div>
  </section>

       
         

          <div class="col-lg-4  col-md-4 col-sm-4" id="totalsec" style="margin-top: 5px; margin-left: 49%;">            
            <div class="d-flex justify-content-between" style="font-weight: 500;">
              <p style="margin-top: 7%;" class="mb-2">Subtotal</p>
              <p style="margin-top: 7%" id="subtotal" class="mb-2"></p>
            </div>
<script>
  document.getElementById('subtotal').innerText={{product.price}}*{{qty}}
</script>
            <div class="d-flex justify-content-between" style="font-weight: 500;">
              <p  class="mb-0">Shipping</p>
              <p class="mb-0">60</p>
            </div>

            <hr class="addtocartdivi">

            <div class="d-flex justify-content-between mb-4" style="font-weight: 500;">
              <p  class="mb-2">Total (tax included)</p>
              <p  class="mb-2" id="totalPrice"></p>
              <script>
                document.getElementById('totalPrice').innerText={{product.price}}*{{qty}}+60
              </script>
            </div>
        
          <div class="">
            <button onclick="placeOrder({{product.id}})" style=" margin-left: 28%; width: 150px;" type="button"
              class="btn btn-primary ">PLACE ORDER</button>

          </div>

        </div>


          <!-- function for placing order  -->

          <form action="/placeorder/" id="orderForm" method="post">
            {% csrf_token %}
            <input type="text" hidden value="{{qty}}" name="qty" id="iqty">
            <input type="text" hidden name="price" id="iprice">
            <input type="text" hidden name="pdetails" value="{{product.id}}" id="ipdetails">
          </form>
          <script>
            {% comment %} window.onload = function (e) {
              var prize = {{ product.prize }};
              document.getElementById('price').innerText = prize;
              document.getElementById('subtotal').innerText =  ( prize);
              document.getElementById('totalPrice').innerText =  ( prize+60);
             
            }

            function updatePrice() {
              var prize = {{ product.prize }};
                var qty = document.getElementById('form1').value;
                document.getElementById('price').innerText =  ( prize* qty);
                document.getElementById('subtotal').innerText =  ( prize* qty);
              document.getElementById('totalPrice').innerText =  ( prize* qty+60);
                

            } {% endcomment %}


            function placeOrder(id) {
             
              document.getElementById('iprice').value=  document.getElementById('totalPrice').innerText ;
             
document.getElementById('orderForm').submit();


            }
          </script>

        </div>




  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
    integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
    integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"
    crossorigin="anonymous"></script>

</body>

</html>